# Frontend
- alias: Set theme at startup
  trigger:
    platform: homeassistant
    event: start
  action:
    service: frontend.set_theme
    data:
      name: dark_teal

# Sunrise
- alias: Sunrise
  trigger:
    platform: sun
    event: sunrise
    offset: '+00:00:00'
  action:
    service: light.turn_off
    entity_id: light.sonoff_1000950368_2

# Sunset
- alias: Sunset
  trigger:
    platform: sun
    event: sunset
    offset: "-00:45:00"
  action:
    service: light.turn_on
    entity_id: group.sunset_lights

# Water boiler
- alias: Turn on water boiler
  trigger:
    - platform: time
      at:
        - '06:00:00'
        - '19:00:00'
    - platform: state
      entity_id: input_boolean.wb_ignore_trigger
      to: 'on'
  action:
    service: switch.turn_on
    entity_id: switch.sonoff_10008508fb

- alias: Turn off water boiler
  trigger:
    - platform: numeric_state
      entity_id: sensor.termotanque_temperatura
      above: 28
    - platform: state
      entity_id: switch.sonoff_10008508fb
      to: 'on'
    - platform: state
      entity_id: input_boolean.wb_ignore_trigger
      to: 'off'
  condition:
    - condition: numeric_state
      entity_id: sensor.termotanque_temperatura
      above: 28
    - condition: state
      entity_id: input_boolean.wb_ignore_trigger
      state: 'off'
  action:
    service: switch.turn_off
    entity_id: switch.sonoff_10008508fb

# PiHole
- alias: Enable Pihole
  trigger:
    - platform: state
      entity_id: input_select.pihole_time
      to: 'Enabled'
  action:
    - service: pi_hole.enable

- alias: Disable Pihole
  trigger:
    - platform: state
      entity_id: input_select.pihole_time
      to: 'Disabled'
  action:
    - service: pi_hole.disable
      data:
        duration: '00:00:00'

- alias: Disable Pihole for 15 seconds
  trigger:
    - platform: state
      entity_id: input_select.pihole_time
      to: '0.15'
  action:
    - service: pi_hole.disable
      data:
        duration: '00:00:15'

- alias: Disable Pihole for 1 minute
  trigger:
    - platform: state
      entity_id: input_select.pihole_time
      to: '1'
  action:
    - service: pi_hole.disable
      data:
        duration: '00:01:00'

- alias: Disable Pihole for 5 minutes
  trigger:
    - platform: state
      entity_id: input_select.pihole_time
      to: '5'
  action:
    - service: pi_hole.disable
      data:
        duration: '00:05:00'

# AC's Condensate Pump
- alias: Turn on condensate pump
  trigger:
    - platform: state
      entity_id: climate.living_ac
      to:
        - 'cool'
        - 'heat'
        - 'dry'
    - platform: state
      entity_id: climate.dormitorio_ac
      to:
        - 'cool'
        - 'heat'
        - 'heat_cool'
        - 'dry'
  action:
    service: switch.turn_on
    entity_id: switch.sonoff_1000854c6a

- alias: Turn off condensate pump living
  trigger:
    - platform: state
      entity_id: climate.living_ac
      to: 'off'
  condition:
    - condition: state
      entity_id: climate.dormitorio_ac
      state: 'off'
  action:
    service: switch.turn_off
    entity_id: switch.sonoff_1000854c6a

- alias: Turn off condensate pump dormitorio
  trigger:
    - platform: state
      entity_id: climate.dormitorio_ac
      to: 'off'
  condition:
    - condition: state
      entity_id: climate.living_ac
      state: 'off'
  action:
    service: switch.turn_off
    entity_id: switch.sonoff_1000854c6a
